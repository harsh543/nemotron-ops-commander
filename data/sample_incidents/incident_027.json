{"id":"INC-027","title":"PersistentVolumeClaim stuck in Pending - StorageClass misconfigured","summary":"New StatefulSet deployment for PostgreSQL replicas created PersistentVolumeClaims that remained in Pending state indefinitely. Events showed 'waiting for a volume to be created, either by external provisioner csi.aws.com or manually created by system administrator'. The StorageClass postgres-fast was configured with provisioner kubernetes.io/aws-ebs but the cluster used the EBS CSI driver (ebs.csi.aws.com) as the in-tree provisioner was migrated. Additionally, the StorageClass specified volumeType gp3 but the fsType parameter was missing, and the allowedTopologies did not include the AZ where the pods were scheduled.","source":"k8s-docs","root_cause":"StorageClass postgres-fast used the legacy in-tree provisioner kubernetes.io/aws-ebs which was migrated to the CSI driver ebs.csi.aws.com in the cluster's Kubernetes version (1.28). The CSI migration translated the provisioner name but the StorageClass parameters were incompatible: missing csi.storage.k8s.io/fstype parameter, and the volumeType parameter should have been type under the CSI driver. The allowedTopologies restricted provisioning to us-east-1a and us-east-1b but the StatefulSet pods were scheduled in us-east-1c.","resolution":"Created a corrected StorageClass with provisioner ebs.csi.aws.com, parameters type=gp3 and csi.storage.k8s.io/fstype=ext4, and expanded allowedTopologies to include all three AZs. Deleted the stuck PVCs and recreated them using the new StorageClass. Added volumeBindingMode: WaitForFirstConsumer to ensure volumes are provisioned in the same AZ as the consuming pod. PVCs bound within 30 seconds of pod scheduling.","services":["persistent-volumes","ebs-csi-driver","postgresql-replicas","statefulset"],"service":"persistent-volumes","severity":"P2","timestamp":"2026-01-28T11:20:00Z","tags":["kubernetes","pvc","storageclass","ebs","csi","gp3","persistent-volume"]}